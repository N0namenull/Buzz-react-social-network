{"ast":null,"code":"import { call, put } from 'redux-saga/effects';\nimport { photoApi } from 'api/photo-api/index';\nimport { apiResponsesMessage } from 'data/constants/api';\nimport { addPhoto, addPhotos, changeStatus, deletePhoto } from 'store/slices/photos-slice/index';\nimport { changeAuthUserAction } from 'store/slices/user-slice';\nexport function* workerFetchPhotos() {\n  const response = yield call(photoApi.getPhotos);\n\n  if (response === apiResponsesMessage.needAuth) {\n    yield put(changeAuthUserAction(false));\n  } else if (response === apiResponsesMessage.unexpected) {\n    return;\n  } else if (typeof response !== 'string') {\n    yield put(addPhotos(response));\n  }\n}\n;\nexport function* workerAddPhoto(data) {\n  yield put(changeStatus('create'));\n  const response = yield call(photoApi.addPhoto, data.payload);\n\n  if (response === apiResponsesMessage.needAuth) {\n    yield put(changeAuthUserAction(false));\n  } else if (response === apiResponsesMessage.unexpected) {\n    yield put(changeStatus('ready'));\n  } else if (typeof response !== 'string') {\n    yield put(addPhoto(response));\n    yield put(changeStatus('ready'));\n  }\n}\n;\nexport function* workerDeletePhoto(data) {\n  const response = yield call(photoApi.deletePhoto, data.payload);\n\n  if (response === apiResponsesMessage.needAuth) {\n    yield put(changeAuthUserAction(false));\n  } else if (response === apiResponsesMessage.unexpected) {\n    return;\n  } else if (response === apiResponsesMessage.success) {\n    yield put(deletePhoto(data.payload));\n  }\n}\n;","map":{"version":3,"names":["call","put","photoApi","apiResponsesMessage","addPhoto","addPhotos","changeStatus","deletePhoto","changeAuthUserAction","workerFetchPhotos","response","getPhotos","needAuth","unexpected","workerAddPhoto","data","payload","workerDeletePhoto","success"],"sources":["E:/Uprojects/Codenk/Social-Network-main/client/src/store/sagas/photo-saga/workers.ts"],"sourcesContent":["import { call, put } from 'redux-saga/effects';\n\nimport { photoApi } from 'api/photo-api/index';\nimport { apiResponsesMessage } from 'data/constants/api';\nimport { addPhoto, addPhotos, changeStatus, deletePhoto } from 'store/slices/photos-slice/index';\nimport { changeAuthUserAction } from 'store/slices/user-slice';\nimport { IPhoto } from 'types/common';\nimport { IWorker } from 'types/helpers';\n\nexport function* workerFetchPhotos() {\n   const response: IPhoto[] | string = yield call(photoApi.getPhotos);\n\n   if (response === apiResponsesMessage.needAuth) {\n      yield put(changeAuthUserAction(false));\n   } else if (response === apiResponsesMessage.unexpected) {\n      return;\n   } else if (typeof (response) !== 'string') {\n      yield put(addPhotos(response));\n   }\n};\n\nexport function* workerAddPhoto(data: IWorker<string>) {\n   yield put(changeStatus('create'));\n\n   const response: IPhoto | string = yield call(photoApi.addPhoto, data.payload);\n\n   if (response === apiResponsesMessage.needAuth) {\n      yield put(changeAuthUserAction(false));\n   } else if (response === apiResponsesMessage.unexpected) {\n      yield put(changeStatus('ready'));\n   } else if (typeof (response) !== 'string') {\n      yield put(addPhoto(response));\n\n      yield put(changeStatus('ready'));\n   }\n};\n\nexport function* workerDeletePhoto(data: IWorker<number>) {\n   const response: string = yield call(photoApi.deletePhoto, data.payload);\n\n   if (response === apiResponsesMessage.needAuth) {\n      yield put(changeAuthUserAction(false));\n   } else if (response === apiResponsesMessage.unexpected) {\n      return;\n   } else if (response === apiResponsesMessage.success) {\n      yield put(deletePhoto(data.payload));\n   }\n};\n"],"mappings":"AAAA,SAASA,IAAT,EAAeC,GAAf,QAA0B,oBAA1B;AAEA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAASC,mBAAT,QAAoC,oBAApC;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,YAA9B,EAA4CC,WAA5C,QAA+D,iCAA/D;AACA,SAASC,oBAAT,QAAqC,yBAArC;AAIA,OAAO,UAAUC,iBAAV,GAA8B;EAClC,MAAMC,QAA2B,GAAG,MAAMV,IAAI,CAACE,QAAQ,CAACS,SAAV,CAA9C;;EAEA,IAAID,QAAQ,KAAKP,mBAAmB,CAACS,QAArC,EAA+C;IAC5C,MAAMX,GAAG,CAACO,oBAAoB,CAAC,KAAD,CAArB,CAAT;EACF,CAFD,MAEO,IAAIE,QAAQ,KAAKP,mBAAmB,CAACU,UAArC,EAAiD;IACrD;EACF,CAFM,MAEA,IAAI,OAAQH,QAAR,KAAsB,QAA1B,EAAoC;IACxC,MAAMT,GAAG,CAACI,SAAS,CAACK,QAAD,CAAV,CAAT;EACF;AACH;AAAA;AAED,OAAO,UAAUI,cAAV,CAAyBC,IAAzB,EAAgD;EACpD,MAAMd,GAAG,CAACK,YAAY,CAAC,QAAD,CAAb,CAAT;EAEA,MAAMI,QAAyB,GAAG,MAAMV,IAAI,CAACE,QAAQ,CAACE,QAAV,EAAoBW,IAAI,CAACC,OAAzB,CAA5C;;EAEA,IAAIN,QAAQ,KAAKP,mBAAmB,CAACS,QAArC,EAA+C;IAC5C,MAAMX,GAAG,CAACO,oBAAoB,CAAC,KAAD,CAArB,CAAT;EACF,CAFD,MAEO,IAAIE,QAAQ,KAAKP,mBAAmB,CAACU,UAArC,EAAiD;IACrD,MAAMZ,GAAG,CAACK,YAAY,CAAC,OAAD,CAAb,CAAT;EACF,CAFM,MAEA,IAAI,OAAQI,QAAR,KAAsB,QAA1B,EAAoC;IACxC,MAAMT,GAAG,CAACG,QAAQ,CAACM,QAAD,CAAT,CAAT;IAEA,MAAMT,GAAG,CAACK,YAAY,CAAC,OAAD,CAAb,CAAT;EACF;AACH;AAAA;AAED,OAAO,UAAUW,iBAAV,CAA4BF,IAA5B,EAAmD;EACvD,MAAML,QAAgB,GAAG,MAAMV,IAAI,CAACE,QAAQ,CAACK,WAAV,EAAuBQ,IAAI,CAACC,OAA5B,CAAnC;;EAEA,IAAIN,QAAQ,KAAKP,mBAAmB,CAACS,QAArC,EAA+C;IAC5C,MAAMX,GAAG,CAACO,oBAAoB,CAAC,KAAD,CAArB,CAAT;EACF,CAFD,MAEO,IAAIE,QAAQ,KAAKP,mBAAmB,CAACU,UAArC,EAAiD;IACrD;EACF,CAFM,MAEA,IAAIH,QAAQ,KAAKP,mBAAmB,CAACe,OAArC,EAA8C;IAClD,MAAMjB,GAAG,CAACM,WAAW,CAACQ,IAAI,CAACC,OAAN,CAAZ,CAAT;EACF;AACH;AAAA"},"metadata":{},"sourceType":"module"}