{"ast":null,"code":"var _jsxFileName = \"E:\\\\Uprojects\\\\Codenk\\\\rogalik\\\\client\\\\src\\\\components\\\\person-page\\\\actions\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useLayoutEffect, useState } from 'react';\nimport { sagaActionCreator, sagasConstantsFriend } from 'data/constants/saga';\nimport { useAppDispatch, useAppSelector } from 'hooks/redux';\nimport { Writing } from './writing';\nimport s from './style.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Actions = () => {\n  _s();\n\n  const dispatch = useAppDispatch();\n  const {\n    friends\n  } = useAppSelector(state => state.friendsSlice);\n  const person_username = useAppSelector(state => state.personSlice.data.username);\n  const [status, setStatus] = useState('no');\n\n  const friendHandler = () => {\n    if (status === 'friend' || status === 'sent') return;\n\n    if (status === 'no') {\n      dispatch(sagaActionCreator(sagasConstantsFriend.SAGA_CREATE_FRIEND, person_username));\n    } else if (status === 'request') {\n      dispatch(sagaActionCreator(sagasConstantsFriend.SAGA_ACCEPT_FRIEND, person_username));\n    }\n  };\n\n  useLayoutEffect(() => {\n    const checkStatus = friends.filter(elem => elem.username === person_username);\n\n    if (checkStatus.length) {\n      setStatus(checkStatus[0].status);\n    } else {\n      setStatus('no');\n    }\n  }, [friends]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: s.wrapper,\n    children: [/*#__PURE__*/_jsxDEV(Writing, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: friendHandler,\n      type: \"button\",\n      className: `\n               ${s.add}\n               ${status === 'friend' ? s._friend : ''}\n               ${status === 'request' ? s._request : ''}\n               ${status === 'sent' ? s._sent : ''}\n            `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 10\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 7\n  }, this);\n};\n\n_s(Actions, \"jium+oWL1StpwGvuF3w7g2VRZus=\", false, function () {\n  return [useAppDispatch, useAppSelector, useAppSelector];\n});\n\n_c = Actions;\n\nvar _c;\n\n$RefreshReg$(_c, \"Actions\");","map":{"version":3,"names":["useLayoutEffect","useState","sagaActionCreator","sagasConstantsFriend","useAppDispatch","useAppSelector","Writing","s","Actions","dispatch","friends","state","friendsSlice","person_username","personSlice","data","username","status","setStatus","friendHandler","SAGA_CREATE_FRIEND","SAGA_ACCEPT_FRIEND","checkStatus","filter","elem","length","wrapper","add","_friend","_request","_sent"],"sources":["E:/Uprojects/Codenk/rogalik/client/src/components/person-page/actions/index.tsx"],"sourcesContent":["import { FC, useLayoutEffect, useState } from 'react';\n\nimport { sagaActionCreator, sagasConstantsFriend } from 'data/constants/saga';\nimport { useAppDispatch, useAppSelector } from 'hooks/redux';\nimport { FriendStatusType } from 'types/common';\n\nimport { Writing } from './writing';\n\nimport s from './style.module.scss';\n\nexport const Actions: FC = () => {\n\n   const dispatch = useAppDispatch();\n\n   const { friends } = useAppSelector(state => state.friendsSlice);\n   const person_username = useAppSelector(state => state.personSlice.data.username);\n\n   const [status, setStatus] = useState<FriendStatusType>('no');\n\n   const friendHandler = () => {\n      if (status === 'friend' || status === 'sent') return;\n\n      if (status === 'no') {\n         dispatch(sagaActionCreator<string>(sagasConstantsFriend.SAGA_CREATE_FRIEND, person_username));\n      } else if (status === 'request') {\n         dispatch(sagaActionCreator<string>(sagasConstantsFriend.SAGA_ACCEPT_FRIEND, person_username));\n      }\n   };\n\n   useLayoutEffect(() => {\n      const checkStatus = friends.filter(elem => elem.username === person_username);\n\n      if (checkStatus.length) {\n         setStatus(checkStatus[0].status);\n      } else {\n         setStatus('no');\n      }\n\n   }, [friends]);\n\n   return (\n      <div className={ s.wrapper }>\n         <Writing />\n\n         <button\n            onClick={ friendHandler }\n            type=\"button\"\n            className={ `\n               ${s.add}\n               ${status === 'friend' ? s._friend : ''}\n               ${status === 'request' ? s._request : ''}\n               ${status === 'sent' ? s._sent : ''}\n            ` }\n         />\n      </div>\n   );\n};\n"],"mappings":";;;AAAA,SAAaA,eAAb,EAA8BC,QAA9B,QAA8C,OAA9C;AAEA,SAASC,iBAAT,EAA4BC,oBAA5B,QAAwD,qBAAxD;AACA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,aAA/C;AAGA,SAASC,OAAT,QAAwB,WAAxB;AAEA,OAAOC,CAAP,MAAc,qBAAd;;AAEA,OAAO,MAAMC,OAAW,GAAG,MAAM;EAAA;;EAE9B,MAAMC,QAAQ,GAAGL,cAAc,EAA/B;EAEA,MAAM;IAAEM;EAAF,IAAcL,cAAc,CAACM,KAAK,IAAIA,KAAK,CAACC,YAAhB,CAAlC;EACA,MAAMC,eAAe,GAAGR,cAAc,CAACM,KAAK,IAAIA,KAAK,CAACG,WAAN,CAAkBC,IAAlB,CAAuBC,QAAjC,CAAtC;EAEA,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBjB,QAAQ,CAAmB,IAAnB,CAApC;;EAEA,MAAMkB,aAAa,GAAG,MAAM;IACzB,IAAIF,MAAM,KAAK,QAAX,IAAuBA,MAAM,KAAK,MAAtC,EAA8C;;IAE9C,IAAIA,MAAM,KAAK,IAAf,EAAqB;MAClBR,QAAQ,CAACP,iBAAiB,CAASC,oBAAoB,CAACiB,kBAA9B,EAAkDP,eAAlD,CAAlB,CAAR;IACF,CAFD,MAEO,IAAII,MAAM,KAAK,SAAf,EAA0B;MAC9BR,QAAQ,CAACP,iBAAiB,CAASC,oBAAoB,CAACkB,kBAA9B,EAAkDR,eAAlD,CAAlB,CAAR;IACF;EACH,CARD;;EAUAb,eAAe,CAAC,MAAM;IACnB,MAAMsB,WAAW,GAAGZ,OAAO,CAACa,MAAR,CAAeC,IAAI,IAAIA,IAAI,CAACR,QAAL,KAAkBH,eAAzC,CAApB;;IAEA,IAAIS,WAAW,CAACG,MAAhB,EAAwB;MACrBP,SAAS,CAACI,WAAW,CAAC,CAAD,CAAX,CAAeL,MAAhB,CAAT;IACF,CAFD,MAEO;MACJC,SAAS,CAAC,IAAD,CAAT;IACF;EAEH,CATc,EASZ,CAACR,OAAD,CATY,CAAf;EAWA,oBACG;IAAK,SAAS,EAAGH,CAAC,CAACmB,OAAnB;IAAA,wBACG,QAAC,OAAD;MAAA;MAAA;MAAA;IAAA,QADH,eAGG;MACG,OAAO,EAAGP,aADb;MAEG,IAAI,EAAC,QAFR;MAGG,SAAS,EAAI;AACzB,iBAAiBZ,CAAC,CAACoB,GAAI;AACvB,iBAAiBV,MAAM,KAAK,QAAX,GAAsBV,CAAC,CAACqB,OAAxB,GAAkC,EAAG;AACtD,iBAAiBX,MAAM,KAAK,SAAX,GAAuBV,CAAC,CAACsB,QAAzB,GAAoC,EAAG;AACxD,iBAAiBZ,MAAM,KAAK,MAAX,GAAoBV,CAAC,CAACuB,KAAtB,GAA8B,EAAG;AAClD;IARS;MAAA;MAAA;MAAA;IAAA,QAHH;EAAA;IAAA;IAAA;IAAA;EAAA,QADH;AAgBF,CA9CM;;GAAMtB,O;UAEOJ,c,EAEGC,c,EACIA,c;;;KALdG,O"},"metadata":{},"sourceType":"module"}