{"ast":null,"code":"import { toast } from 'react-toastify';\nimport axios from 'axios';\nimport { apiResponsesMessage, Urls } from 'data/constants/api';\nimport { defaultToast } from 'data/constants/toast';\nexport const instance = axios.create({\n  baseURL: Urls.server_url,\n  withCredentials: true\n});\nexport const friendApi = {\n  getFriends: async data => {\n    try {\n      const response = await instance.get(`${Urls.friend}/${data}`);\n      return response.data.friends;\n    } catch (error) {\n      var _error$response;\n\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n        return apiResponsesMessage.needAuth;\n      }\n\n      toast.warn(apiResponsesMessage.unexpected, defaultToast);\n      return apiResponsesMessage.unexpected;\n    }\n  },\n  createFriend: async data => {\n    try {\n      const response = await instance.post(Urls.friend, {\n        person_username: data\n      }, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      return response.data.friendData;\n    } catch (error) {\n      var _error$response2, _error$response3;\n\n      if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 409) {\n        return error.response.data.status;\n      }\n\n      if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 401) {\n        return error.response.data.message;\n      }\n\n      toast.warn(apiResponsesMessage.unexpected, defaultToast);\n      return apiResponsesMessage.unexpected;\n    }\n  },\n  acceptFriend: async data => {\n    try {\n      await instance.patch(Urls.friend, {\n        person_username: data\n      }, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      return apiResponsesMessage.success;\n    } catch (error) {\n      var _error$response4;\n\n      if (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 401) {\n        return apiResponsesMessage.needAuth;\n      }\n\n      toast.warn(apiResponsesMessage.unexpected, defaultToast);\n      return apiResponsesMessage.unexpected;\n    }\n  },\n  deleteFriend: async data => {\n    try {\n      await instance.delete(Urls.friend, {\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        data: {\n          person_username: data\n        }\n      });\n      toast.info(apiResponsesMessage.deleteFriend, defaultToast);\n      return apiResponsesMessage.success;\n    } catch (error) {\n      var _error$response5;\n\n      if (((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.status) === 401) {\n        return apiResponsesMessage.needAuth;\n      }\n\n      toast.warn(apiResponsesMessage.unexpected, defaultToast);\n      return apiResponsesMessage.unexpected;\n    }\n  }\n};","map":{"version":3,"names":["toast","axios","apiResponsesMessage","Urls","defaultToast","instance","create","baseURL","server_url","withCredentials","friendApi","getFriends","data","response","get","friend","friends","error","status","needAuth","warn","unexpected","createFriend","post","person_username","headers","friendData","message","acceptFriend","patch","success","deleteFriend","delete","info"],"sources":["E:/Uprojects/Codenk/Diplom/client/src/api/friend-api/index.ts"],"sourcesContent":["import { toast } from 'react-toastify';\nimport axios from 'axios';\n\nimport { apiResponsesMessage, Urls } from 'data/constants/api';\nimport { defaultToast } from 'data/constants/toast';\nimport { IFriend } from 'types/common';\n\nexport const instance = axios.create({\n   baseURL: Urls.server_url,\n   withCredentials: true,\n});\n\nexport const friendApi = {\n   getFriends: async (data: string) => {\n      try {\n         const response = await instance.get<{ message: string, friends: IFriend[] }>(`${Urls.friend}/${data}`);\n\n         return response.data.friends;\n      } catch (error: any) {\n         if (error.response?.status === 401) {\n            return apiResponsesMessage.needAuth;\n         }\n\n         toast.warn(apiResponsesMessage.unexpected, defaultToast);\n         \n         return apiResponsesMessage.unexpected;\n      }\n   },\n\n   createFriend: async (data: string) => {\n      try {\n         const response = await instance.post<{ message: string, friendData: IFriend }>(\n            Urls.friend,\n            { person_username: data },\n            { headers: { 'Content-Type': 'application/json' } },\n         );\n\n         return response.data.friendData;\n      } catch (error: any) {\n         if (error.response?.status === 409) {\n            return error.response.data.status;\n         }\n\n         if (error.response?.status === 401) {\n            return error.response.data.message;\n         }\n\n         toast.warn(apiResponsesMessage.unexpected, defaultToast);\n         \n         return apiResponsesMessage.unexpected;\n      }\n   },\n\n   acceptFriend: async (data: string) => {\n      try {\n         await instance.patch<{ message: string }>(\n            Urls.friend,\n            { person_username: data },\n            { headers: { 'Content-Type': 'application/json' } },\n         );\n\n         return apiResponsesMessage.success;\n      } catch (error: any) {\n         if (error.response?.status === 401) {\n            return apiResponsesMessage.needAuth;\n         }\n\n         toast.warn(apiResponsesMessage.unexpected, defaultToast);\n         \n         return apiResponsesMessage.unexpected;\n      }\n   },\n\n   deleteFriend: async (data: string) => {\n      try {\n         await instance.delete<{ message: string }>(\n            Urls.friend,\n            {\n               headers: { 'Content-Type': 'application/json' },\n               data: { person_username: data },\n            });\n\n         toast.info(apiResponsesMessage.deleteFriend, defaultToast);\n         \n         return apiResponsesMessage.success;\n      } catch (error: any) {\n         if (error.response?.status === 401) {\n            return apiResponsesMessage.needAuth;\n         }\n\n         toast.warn(apiResponsesMessage.unexpected, defaultToast);\n         \n         return apiResponsesMessage.unexpected;\n      }\n   },\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}